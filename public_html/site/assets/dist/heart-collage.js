"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(n){"function"==typeof define&&define.amd?define(["jquery"],function(e){return n(e)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?exports=n(require("jquery")):n(jQuery)}(function(n){n.easing.jswing=n.easing.swing;var e=Math.pow,t=Math.sqrt,u=Math.sin,r=Math.cos,o=Math.PI,i=1.70158,c=1.525*i,a=2*o/3,f=2*o/4.5;function s(n){var e=7.5625,t=2.75;return n<1/t?e*n*n:n<2/t?e*(n-=1.5/t)*n+.75:n<2.5/t?e*(n-=2.25/t)*n+.9375:e*(n-=2.625/t)*n+.984375}n.extend(n.easing,{def:"easeOutQuad",swing:function(e){return n.easing[n.easing.def](e)},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return 1-(1-n)*(1-n)},easeInOutQuad:function(n){return n<.5?2*n*n:1-e(-2*n+2,2)/2},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return 1-e(1-n,3)},easeInOutCubic:function(n){return n<.5?4*n*n*n:1-e(-2*n+2,3)/2},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1-e(1-n,4)},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-e(-2*n+2,4)/2},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1-e(1-n,5)},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1-e(-2*n+2,5)/2},easeInSine:function(n){return 1-r(n*o/2)},easeOutSine:function(n){return u(n*o/2)},easeInOutSine:function(n){return-(r(o*n)-1)/2},easeInExpo:function(n){return 0===n?0:e(2,10*n-10)},easeOutExpo:function(n){return 1===n?1:1-e(2,-10*n)},easeInOutExpo:function(n){return 0===n?0:1===n?1:n<.5?e(2,20*n-10)/2:(2-e(2,-20*n+10))/2},easeInCirc:function(n){return 1-t(1-e(n,2))},easeOutCirc:function(n){return t(1-e(n-1,2))},easeInOutCirc:function(n){return n<.5?(1-t(1-e(2*n,2)))/2:(t(1-e(-2*n+2,2))+1)/2},easeInElastic:function(n){return 0===n?0:1===n?1:-e(2,10*n-10)*u((10*n-10.75)*a)},easeOutElastic:function(n){return 0===n?0:1===n?1:e(2,-10*n)*u((10*n-.75)*a)+1},easeInOutElastic:function(n){return 0===n?0:1===n?1:n<.5?-e(2,20*n-10)*u((20*n-11.125)*f)/2:e(2,-20*n+10)*u((20*n-11.125)*f)/2+1},easeInBack:function(n){return 2.70158*n*n*n-i*n*n},easeOutBack:function(n){return 1+2.70158*e(n-1,3)+i*e(n-1,2)},easeInOutBack:function(n){return n<.5?e(2*n,2)*(7.189819*n-c)/2:(e(2*n-2,2)*((c+1)*(2*n-2)+c)+2)/2},easeInBounce:function(n){return 1-s(1-n)},easeOutBounce:s,easeInOutBounce:function(n){return n<.5?(1-s(1-2*n))/2:(1+s(2*n-1))/2}})});"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jigsaw=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.node=e,n.pieces=_.shuffle(e.dataset.pieces.split(",")).map(function(e){return new JigsawPiece(e)}),n.pieceCount=n.pieces.length,n.baseUrl=app.config.ASSETS_URL+"slideshows/"+e.dataset.name,n.INITIAL_DELAY=500,n.next=_.bindKey(n,"nextPiece"),n.loadPieces().then(n.next),n}return _inherits(t,EventEmitter),_createClass(t,[{key:"loadPieces",value:function(){return Promise.all(_.invokeMap(this.pieces,"load",this.baseUrl)).then(_.bindKey(this,"trigger","piecesloaded"))}},{key:"nextPiece",value:function(){var e=this.pieces.shift();this.node.appendChild(e.node);var t=1-this.pieces.length/this.pieceCount,n=jQuery.easing.easeInQuad(t);t<1?setTimeout(this.next,500*n):this.end()}},{key:"end",value:function(){this.trigger("finished")}}]),t}();"use strict";var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var JigsawPiece=function(){function e(n){_classCallCheck(this,e),this.node=new Image,this.node.classList.add("piece"),this.name=n,this.setPosition()}return _createClass(e,[{key:"setPosition",value:function(){var e=this.name.replace(/piece-(.*)\.png/,"$1").split("x");this.node.style.cssText="left: "+e[0]+"px; top: "+e[1]+"px;"}},{key:"load",value:function(e){var n=this;return new Promise(function(t){n.node.addEventListener("load",t),n.node.src=e+"/"+n.name})}}]),e}();"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var HeartCollage=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.finishingPieces=e.dataset.afterPieces.split(",").map(function(e,t){return new HeartCollagePiece(e,t)}),n.beforeEnd=_.bindKey(n,"nextFinishingPiece"),n}return _inherits(t,Jigsaw),_createClass(t,[{key:"showPiece",value:function(e){e.node.classList.add("visible"),requestAnimationFrame(this.beforeEnd)}},{key:"nextFinishingPiece",value:function(){var e=this.finishingPieces.shift();e?setTimeout(this.showPiece.bind(this,e),1e3*e.delay):_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"end",this).call(this)}},{key:"end",value:function(){requestAnimationFrame(this.beforeEnd)}}]),t}();"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var HeartCollagePiece=function(e){function t(e,n){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.node=document.getElementById(e),o.name=e,o.node.style.zIndex=n+2,o.delay=parseInt(o.node.dataset.delay,10),o}return _inherits(t,JigsawPiece),t}();"use strict";app.init(function(){var e=document.querySelector(".jigsaw");app.heartCollage=new HeartCollage(e),app.heartCollage.on("piecesloaded",function(){return app.music.play(e.dataset.name)}),app.heartCollage.on("finished",function(){return app.music.stop()})});